(function(e,t,n,r){"use strict";var i="unHighlight";var s=function(t,r){var i=function(){};var s=i.prototype.unHighlightMethods={init:function(t){var n=s.dataStore;n.pm=s;n.el=t;s.attachListeners(e(t),n)},attachListeners:function(t,n){t.on("unHighlight-deselect",function(){s.trackSelection();var n=e.Event("unHighlight");n.target=t[0];r[0].call(this,n)}).on("select",function(){s.trackSelection();n.selectedAndBlurredBefore=false}).on("blur",function(){var e=n.isTextSelected;if(e){n.selectedAndBlurredBefore=true}}).on("keydown",function(){setTimeout(function(){if(n.selectedAndBlurredBefore){n.selectedAndBlurredBefore=false}else{s.trackSelection()}})}).on("click",function(){setTimeout(function(){s.trackSelection();n.selectedAndBlurredBefore=false})}).on("mouseout focus",function(){setTimeout(function(){s.trackSelection()})})},dataStore:{caretStatus:{start:0,end:0},isTextSelected:false,selectedAndBlurredBefore:false},setDataStore:function(e,t){s.dataStore[e]=t},trackSelection:function(){var t=this,n=t.dataStore,r=e(n.el);var i=n.isTextSelected;t.setSelectionStatus();var s=n.isTextSelected;if(i&&!s){r.trigger("unHighlight-deselect")}},isTextSelected:function(e){if(Math.abs(e.start-e.end)>0){return true}},setSelectionStatus:function(){var e=s.dataStore;e.caretStatus=e.pm.getInputSelection(e.el);if(e.pm.isTextSelected(e.caretStatus)){this.setDataStore("isTextSelected",true)}else{this.setDataStore("isTextSelected",false)}},getInputSelection:function(e){var t=0,r=0,i,s,o,u,a;if(typeof e.selectionStart==="number"&&typeof e.selectionEnd==="number"){t=e.selectionStart;r=e.selectionEnd}else{s=n.selection.createRange();if(s&&s.parentElement()===e){u=e.value.length;i=e.value.replace(/\r\n/g,"\n");o=e.createTextRange();o.moveToBookmark(s.getBookmark());a=e.createTextRange();a.collapse(false);if(o.compareEndPoints("StartToEnd",a)>-1){t=r=u}else{t=-o.moveStart("character",-u);t+=i.slice(0,t).split("\n").length-1;if(o.compareEndPoints("EndToEnd",a)>-1){r=u}else{r=-o.moveEnd("character",-u);r+=i.slice(0,r).split("\n").length-1}}}}return{start:t,end:r}}};s.init(t)};e.fn[i]=function(){var t=arguments;return this.each(function(){if(!e.data(this,"plugin_"+i)){try{if(e.isFunction(t[0])){e.data(this,"plugin_"+i,new s(this,t))}}catch(n){throw"Not a function."}}})}})(jQuery,window,document)